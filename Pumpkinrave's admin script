wait("0.2")

-- LocalScript in StarterPlayer > StarterPlayerScripts

local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer

-- Character references (updated on respawn)
local character
local humanoidRootPart
local humanoid

local flying = false
local flySpeed = 50
local noclip = false
local espEnabled = false
local invisibleEnabled = false

local espTable = {}

-- Setup character references
local function setupCharacter(char)
    character = char
    humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    humanoid = character:WaitForChild("Humanoid")
    if invisibleEnabled then
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.Transparency = 1
            end
        end
    end
end
setupCharacter(player.Character or player.CharacterAdded:Wait())
player.CharacterAdded:Connect(setupCharacter)

-- GUI Creation
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,250,0,300)
mainFrame.Position = UDim2.new(0.5,-125,0.5,-150)
mainFrame.BackgroundColor3 = Color3.fromRGB(255,140,0)
mainFrame.BorderSizePixel = 2
mainFrame.Parent = screenGui
mainFrame.Active = true
mainFrame.Draggable = true

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1,0,0.15,0)
titleLabel.Position = UDim2.new(0,0,0,5)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Pumpkinraves Admin"
titleLabel.TextColor3 = Color3.fromRGB(255,255,255)
titleLabel.Font = Enum.Font.GothamSemibold
titleLabel.TextScaled = true
titleLabel.Parent = mainFrame

-- Button creator
local function createButton(text,pos)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8,0,0.15,0)
    btn.Position = pos
    btn.BackgroundColor3 = Color3.fromRGB(255,170,0)
    btn.Text = text
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Parent = mainFrame
    return btn
end

-- Buttons
local flyButton = createButton("Fly: OFF", UDim2.new(0.1,0,0.25,0))
local noclipButton = createButton("Noclip: OFF", UDim2.new(0.1,0,0.45,0))
local speedButton = createButton("Speed +2", flyButton.Position)
speedButton.Visible = false
local jumpButton = createButton("Jump +2", noclipButton.Position)
jumpButton.Visible = false
local espButton = createButton("ESP: OFF", flyButton.Position)
espButton.Visible = false
local invisibleButton = createButton("Invisible: OFF", noclipButton.Position)
invisibleButton.Visible = false
local nextPageButton = createButton("Next", UDim2.new(0.1,0,0.65,0))
local prevPageButton = createButton("Next", nextPageButton.Position)
prevPageButton.Visible = true

-- Page tracking
local currentPage = 1
local function updatePage()
    -- Hide all buttons
    flyButton.Visible = false
    noclipButton.Visible = false
    speedButton.Visible = false
    jumpButton.Visible = false
    espButton.Visible = false
    invisibleButton.Visible = false

    -- Show based on page
    if currentPage == 1 then
        flyButton.Visible = true
        noclipButton.Visible = true
    elseif currentPage == 2 then
        speedButton.Visible = true
        jumpButton.Visible = true
    elseif currentPage == 3 then
        espButton.Visible = true
        invisibleButton.Visible = true
    end
end
updatePage()

-- Fly functions
local function startFlying()
    if flying then return end
    flying = true
    flyButton.Text = "Fly: ON"
    local gyro = Instance.new("BodyGyro")
    gyro.P = 9e4
    gyro.MaxTorque = Vector3.new(9e9,9e9,9e9)
    gyro.CFrame = humanoidRootPart.CFrame
    gyro.Parent = humanoidRootPart
    local velocity = Instance.new("BodyVelocity")
    velocity.Velocity = Vector3.zero
    velocity.MaxForce = Vector3.new(9e9,9e9,9e9)
    velocity.Parent = humanoidRootPart
    RunService.RenderStepped:Connect(function()
        if not flying then return end
        local cam = workspace.CurrentCamera
        gyro.CFrame = cam.CFrame
        local dir = Vector3.zero
        if UIS:IsKeyDown(Enum.KeyCode.W) then dir += cam.CFrame.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.S) then dir -= cam.CFrame.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.A) then dir -= cam.CFrame.RightVector end
        if UIS:IsKeyDown(Enum.KeyCode.D) then dir += cam.CFrame.RightVector end
        if UIS:IsKeyDown(Enum.KeyCode.Space) then dir += cam.CFrame.UpVector end
        if UIS:IsKeyDown(Enum.KeyCode.LeftShift) then dir -= cam.CFrame.UpVector end
        if dir.Magnitude > 0 then dir = dir.Unit end
        velocity.Velocity = dir * flySpeed
    end)
end
local function stopFlying()
    flying = false
    flyButton.Text = "Fly: OFF"
    if humanoidRootPart:FindFirstChild("BodyGyro") then humanoidRootPart.BodyGyro:Destroy() end
    if humanoidRootPart:FindFirstChild("BodyVelocity") then humanoidRootPart.BodyVelocity:Destroy() end
end

-- Noclip
local function startNoclip()
    if noclip then return end
    noclip = true
    noclipButton.Text = "Noclip: ON"
    RunService.Stepped:Connect(function()
        if noclip then
            for _, part in pairs(character:GetChildren()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
        end
    end)
end
local function stopNoclip()
    noclip = false
    noclipButton.Text = "Noclip: OFF"
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") then part.CanCollide = true end
    end
end

-- ESP
local function toggleESP()
    espEnabled = not espEnabled
    espButton.Text = espEnabled and "ESP: ON" or "ESP: OFF"
    for _, obj in pairs(espTable) do
        if obj.Adornee then obj:Destroy() end
    end
    espTable = {}
    if espEnabled then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= player and p.Character then
                local part = p.Character:FindFirstChild("HumanoidRootPart")
                if part then
                    local box = Instance.new("BoxHandleAdornment")
                    box.Adornee = part
                    box.Size = part.Size
                    box.Color3 = Color3.fromRGB(255,165,0)
                    box.AlwaysOnTop = true
                    box.ZIndex = 2
                    box.Parent = part
                    espTable[#espTable+1] = box
                    local billboard = Instance.new("BillboardGui")
                    billboard.Size = UDim2.new(0,100,0,50)
                    billboard.Adornee = part
                    billboard.AlwaysOnTop = true
                    local textLabel = Instance.new("TextLabel")
                    textLabel.BackgroundTransparency = 1
                    textLabel.Size = UDim2.new(1,0,1,0)
                    textLabel.TextColor3 = Color3.fromRGB(255,165,0)
                    textLabel.Text = p.Name
                    textLabel.TextScaled = true
                    textLabel.Font = Enum.Font.GothamBold
                    textLabel.Parent = billboard
                    billboard.Parent = part
                    espTable[#espTable+1] = billboard
                end
            end
        end
    end
end

-- Invisible
local function toggleInvisible()
    invisibleEnabled = not invisibleEnabled
    invisibleButton.Text = invisibleEnabled and "Invisible: ON" or "Invisible: OFF"
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Transparency = invisibleEnabled and 1 or 0
        end
    end
end

-- Connections
flyButton.MouseButton1Click:Connect(function() if flying then stopFlying() else startFlying() end end)
noclipButton.MouseButton1Click:Connect(function() if noclip then stopNoclip() else startNoclip() end end)
speedButton.MouseButton1Click:Connect(function() humanoid.WalkSpeed += 2 end)
jumpButton.MouseButton1Click:Connect(function() humanoid.JumpPower += 2 end)
espButton.MouseButton1Click:Connect(toggleESP)
invisibleButton.MouseButton1Click:Connect(toggleInvisible)

-- Page navigation cyclical
nextPageButton.MouseButton1Click:Connect(function()
    currentPage += 1
    if currentPage > 3 then currentPage = 1 end
    updatePage()
end)
prevPageButton.MouseButton1Click:Connect(function()
    currentPage -= 1
    if currentPage < 1 then currentPage = 3 end
    updatePage()
end)


